<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="DivisionDAO">

	<select id="getDivisionList" resultType="division">
		<![CDATA[
			SELECT * FROM RECIPE ORDER BY RECIPE_CNT DESC LIMIT #{startpage}, 8;
		]]>
	</select>
	
	<select id="getDivisionInList" resultType="divisionIn">
			SELECT R.ingredient_no, R.ingredient_nm, R.ingredient_categ, R.ingredient_price, R.ingredient_thumbName, R.ingredient_amt, I.ingredient_sell_sum
			from ingredient R INNER join rank_sell_ingredient_list I
			on R.ingredient_no = I.ingredient_no
			order by ingredient_sell_sum desc
			LIMIT #{startpage}, 8;
	</select>
	
	<select id="getDivisionCount" resultType="int">
		<![CDATA[
			SELECT COUNT(*) FROM RECIPE;
		]]>
	</select>
	
	<select id="getDivisionInCount" resultType="int">
		<![CDATA[
			SELECT COUNT(*) FROM ingredient;
		]]>
	</select>
	
	<select id="getAjaxList" parameterType="java.util.HashMap" resultType="division">
			SELECT * FROM  RECIPE WHERE recipe_category_kind=#{kind} OR recipe_category_ing=#{ing} OR recipe_category_how=#{how} ORDER BY RECIPE_CNT DESC LIMIT #{startpage},8;
	</select>
	
	<select id="getAjaxCount" parameterType="java.util.HashMap" resultType="int">
		<![CDATA[
			SELECT COUNT(*) FROM  RECIPE WHERE recipe_category_kind=#{kind} OR recipe_category_ing=#{ing} OR recipe_category_how=#{how};
		]]>
	</select>
	
	<select id="getAjaxingrelist" parameterType="java.util.HashMap" resultType="divisionIn">
			SELECT R.ingredient_no, R.ingredient_nm, R.ingredient_categ, R.ingredient_price, R.ingredient_thumbName, R.ingredient_amt, I.ingredient_sell_sum
			from ingredient R INNER join rank_sell_ingredient_list I
			on R.ingredient_no = I.ingredient_no
			where ingredient_categ = #{ingredient_categ}
			order by ingredient_sell_sum desc
			LIMIT #{startpage}, 8;
	</select>
	
	<select id="getAjaxinCount" resultType="int">
			SELECT COUNT(*) FROM ingredient WHERE ingredient_categ = #{categ}
	</select>
	

</mapper>


<!--		<choose>
			<when test='!(#{kind}.equals(""))'>
				WHERE recipe_category_kind=#{kind} ORDER BY RECIPE_CNT DESC, RECIPE_LIKE DESC LIMIT 0,8;
			</when>
		</choose>-->
